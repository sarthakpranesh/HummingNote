import React, {useEffect} from 'react';
import {StyleSheet} from 'react-native';
import {View} from '../../components/Themed';
import Svg from  'react-native-svg';
import {Easing, useSharedValue, withTiming} from 'react-native-reanimated';

//importing constants
import Layout from '../../constants/Layout';
import AnimatedStroke from '../../components/AnimatedStroke/AnimatedStroke';

//importing Styles
import Styles from '../../constants/Styles';

const viewBoxWidth = 846 + 20;
const viewBoxHight = 381 + 20;
const width = Layout.window.width - 64;
const height = width * (viewBoxHight / viewBoxWidth);
const path = [
    "M109.781 145H90.9336V79.2773H19.2539V145H0.503906V2.8125H19.2539V63.9453H90.9336V2.8125H109.781V145Z",
    "M205.484 134.551C198.453 142.819 188.134 146.953 174.527 146.953C163.264 146.953 154.671 143.698 148.746 137.188C142.887 130.612 139.924 120.911 139.859 108.086V39.3359H157.926V107.598C157.926 123.613 164.436 131.621 177.457 131.621C191.259 131.621 200.439 126.478 204.996 116.191V39.3359H223.062V145H205.875L205.484 134.551Z",
    "M267.594 39.3359L268.082 51.0547C275.829 41.9401 286.279 37.3828 299.43 37.3828C314.208 37.3828 324.267 43.0469 329.605 54.375C333.121 49.2969 337.678 45.1953 343.277 42.0703C348.941 38.9453 355.615 37.3828 363.297 37.3828C386.474 37.3828 398.258 49.6549 398.648 74.1992V145H380.582V75.2734C380.582 67.7214 378.857 62.0898 375.406 58.3789C371.956 54.6029 366.161 52.7148 358.023 52.7148C351.318 52.7148 345.751 54.7331 341.324 58.7695C336.897 62.7409 334.326 68.112 333.609 74.8828V145H315.445V75.7617C315.445 60.3971 307.926 52.7148 292.887 52.7148C281.038 52.7148 272.932 57.7604 268.57 67.8516V145H250.504V39.3359H267.594Z",
    "M442.984 39.3359L443.473 51.0547C451.22 41.9401 461.669 37.3828 474.82 37.3828C489.599 37.3828 499.658 43.0469 504.996 54.375C508.512 49.2969 513.069 45.1953 518.668 42.0703C524.332 38.9453 531.005 37.3828 538.688 37.3828C561.865 37.3828 573.648 49.6549 574.039 74.1992V145H555.973V75.2734C555.973 67.7214 554.247 62.0898 550.797 58.3789C547.346 54.6029 541.552 52.7148 533.414 52.7148C526.708 52.7148 521.142 54.7331 516.715 58.7695C512.288 62.7409 509.716 68.112 509 74.8828V145H490.836V75.7617C490.836 60.3971 483.316 52.7148 468.277 52.7148C456.428 52.7148 448.323 57.7604 443.961 67.8516V145H425.895V39.3359H442.984Z",
    "M621.012 145H602.945V39.3359H621.012V145ZM601.48 11.3086C601.48 8.37891 602.359 5.90495 604.117 3.88672C605.94 1.86849 608.609 0.859375 612.125 0.859375C615.641 0.859375 618.31 1.86849 620.133 3.88672C621.956 5.90495 622.867 8.37891 622.867 11.3086C622.867 14.2383 621.956 16.6797 620.133 18.6328C618.31 20.5859 615.641 21.5625 612.125 21.5625C608.609 21.5625 605.94 20.5859 604.117 18.6328C602.359 16.6797 601.48 14.2383 601.48 11.3086Z",
    "M667.105 39.3359L667.691 52.6172C675.764 42.4609 686.311 37.3828 699.332 37.3828C721.663 37.3828 732.926 49.9805 733.121 75.1758V145H715.055V75.0781C714.99 67.4609 713.232 61.8294 709.781 58.1836C706.396 54.5378 701.09 52.7148 693.863 52.7148C688.004 52.7148 682.861 54.2773 678.434 57.4023C674.007 60.5273 670.556 64.6289 668.082 69.707V145H650.016V39.3359H667.105Z",
    "M756.07 91.2891C756.07 74.8177 759.879 61.7318 767.496 52.0312C775.113 42.2656 785.204 37.3828 797.77 37.3828C810.66 37.3828 820.719 41.9401 827.945 51.0547L828.824 39.3359H845.328V142.461C845.328 156.133 841.259 166.908 833.121 174.785C825.048 182.663 814.176 186.602 800.504 186.602C792.887 186.602 785.432 184.974 778.141 181.719C770.849 178.464 765.283 174.004 761.441 168.34L770.816 157.5C778.564 167.07 788.036 171.855 799.234 171.855C808.023 171.855 814.859 169.382 819.742 164.434C824.69 159.486 827.164 152.52 827.164 143.535V134.453C819.938 142.786 810.074 146.953 797.574 146.953C785.204 146.953 775.178 141.973 767.496 132.012C759.879 122.051 756.07 108.477 756.07 91.2891ZM774.234 93.3398C774.234 105.254 776.676 114.629 781.559 121.465C786.441 128.236 793.277 131.621 802.066 131.621C813.46 131.621 821.826 126.445 827.164 116.094V67.8516C821.63 57.7604 813.329 52.7148 802.262 52.7148C793.473 52.7148 786.604 56.1328 781.656 62.9688C776.708 69.8047 774.234 79.9284 774.234 93.3398Z",
    "M333.219 379H314.371L242.789 269.43V379H223.941V236.812H242.789L314.566 346.871V236.812H333.219V379Z",
    "M358.902 325.191C358.902 314.84 360.921 305.53 364.957 297.262C369.059 288.993 374.723 282.613 381.949 278.121C389.241 273.629 397.542 271.383 406.852 271.383C421.24 271.383 432.861 276.363 441.715 286.324C450.634 296.285 455.094 309.534 455.094 326.07V327.34C455.094 337.626 453.108 346.871 449.137 355.074C445.23 363.212 439.599 369.56 432.242 374.117C424.951 378.674 416.552 380.953 407.047 380.953C392.724 380.953 381.103 375.973 372.184 366.012C363.329 356.051 358.902 342.867 358.902 326.461V325.191ZM377.066 327.34C377.066 339.059 379.768 348.466 385.172 355.562C390.641 362.659 397.932 366.207 407.047 366.207C416.227 366.207 423.518 362.626 428.922 355.465C434.326 348.238 437.027 338.147 437.027 325.191C437.027 313.603 434.26 304.228 428.727 297.066C423.258 289.84 415.966 286.227 406.852 286.227C397.932 286.227 390.738 289.775 385.27 296.871C379.801 303.967 377.066 314.124 377.066 327.34Z",
    "M502.262 247.75V273.336H521.988V287.301H502.262V352.828C502.262 357.06 503.141 360.25 504.898 362.398C506.656 364.482 509.651 365.523 513.883 365.523C515.966 365.523 518.831 365.133 522.477 364.352V379C517.724 380.302 513.102 380.953 508.609 380.953C500.536 380.953 494.449 378.512 490.348 373.629C486.246 368.746 484.195 361.812 484.195 352.828V287.301H464.957V273.336H484.195V247.75H502.262Z",
    "M587.027 380.953C572.704 380.953 561.051 376.266 552.066 366.891C543.082 357.451 538.59 344.853 538.59 329.098V325.777C538.59 315.296 540.576 305.953 544.547 297.75C548.583 289.482 554.182 283.036 561.344 278.414C568.57 273.727 576.383 271.383 584.781 271.383C598.518 271.383 609.195 275.908 616.812 284.957C624.43 294.007 628.238 306.962 628.238 323.824V331.344H556.656C556.917 341.76 559.944 350.191 565.738 356.637C571.598 363.017 579.02 366.207 588.004 366.207C594.384 366.207 599.788 364.905 604.215 362.301C608.642 359.697 612.516 356.246 615.836 351.949L626.871 360.543C618.017 374.15 604.736 380.953 587.027 380.953ZM584.781 286.227C577.49 286.227 571.37 288.896 566.422 294.234C561.474 299.508 558.414 306.93 557.242 316.5H610.172V315.133C609.651 305.953 607.177 298.857 602.75 293.844C598.323 288.766 592.333 286.227 584.781 286.227Z",
]

const LoadingScreen = (props: any) => {
    const progress = useSharedValue(0);
    useEffect(() => {
        progress.value = withTiming(1, {duration: 2000, easing: Easing.linear})
    }, [progress]);

    setTimeout(() => {
        props.hasLoaded();
    }, 2500);
    
    return (
        <View style={Styles.container}>
            <Svg width={width} height={height} viewBox={`0 0 ${viewBoxWidth} ${viewBoxHight}`}>
                {path.map((d, key) => (
                    <AnimatedStroke progress={progress} d={d} key={key} />
                ))
                }
            </Svg>
        </View>
    )
}

const styles = StyleSheet.create({

});

export default LoadingScreen;
